// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  output          = "../node_modules/.prisma/client"
  previewFeatures = ["selectRelationCount"]
}

model Domain {
  id           Int       @id @default(autoincrement())
  home         String    @unique @db.VarChar(250)
  indexUrl     String?   @map("index_url") @db.VarChar(2048)
  indexPath    String?   @map("index_path") @db.VarChar(250)
  nextPath     String?   @map("next_path") @db.VarChar(250)
  scrollMore   Boolean   @default(false)
  contentPath  String?   @map("content_path") @db.VarChar(250)
  headerPath   String?   @map("header_path") @db.VarChar(250)
  categoryPath String?   @map("category_path") @db.VarChar(250)
  adminEmail   String?   @map("admin_email") @db.VarChar(250)
  active       Boolean   @default(true)
  disabled     Boolean   @default(false)
  broken       Boolean   @default(false)
  createdAt    DateTime  @default(now()) @map("created_at")
  updateAt     DateTime? @updatedAt @map("update_at")
  links        Link[]
}

model Link {
  id        Int       @id @default(autoincrement())
  domainId  Int       @map("domain_id")
  url       String    @unique @db.VarChar(2048)
  title     String?   @db.VarChar(250)
  active    Boolean   @default(true)
  broken    Boolean   @default(false)
  scraped   Boolean   @default(false)
  createdAt DateTime  @default(now()) @map("created_at")
  updateAt  DateTime? @updatedAt @map("update_at")
  domain    Domain    @relation(fields: [domainId], references: [id])
  content   Content?
}

model Content {
  linkId    Int       @id @map("link_id")
  content   String    @db.Text
  createdAt DateTime  @default(now()) @map("created_at")
  updateAt  DateTime? @updatedAt @map("update_at")
  link      Link      @relation(fields: [linkId], references: [id])
}
